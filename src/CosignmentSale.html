<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <title>Seller Table + Label Preview</title>
  <script src="./js/vue.global.prod.js"></script>
  <script src="./js/bwip-js-min.js"></script>
  <link rel="stylesheet" href="./style/index.css">
  </link>
  <link rel="stylesheet" href="./style/print.css">
  </link>
  <link rel="stylesheet" href="./style/index.css">
  </link>
</head>

<body>
  <div id="app">
    <div class="noPrint">
      <div id="edit-data">
        <h1>Seller Table</h1>

        <div class="controls">
          <div>
            <label>Seller ID: <input v-model="sellerData.sellerId" placeholder="Enter Seller ID" /></label>
          </div>
          <div>
            <label>Default Gender:
              <select v-model="sellerData.defaultGender">
                <option value="unmarked"> - </option>
                <option value="male">Male</option>
                <option value="female">Female</option>
              </select>
            </label>
          </div>
          <div>
            <label>Default Donation: <input type="checkbox" v-model="sellerData.defaultDonation" /></label>
          </div>
        </div>

        <table>
          <thead>
            <tr>
              <th>Donation</th>
              <th>Gender</th>
              <th>Description</th>
              <th>Size</th>
              <th>Price (â‰¥ 2)</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            <tr v-for="(item, index) in sellerData.items" :key="index">
              <td><input type="checkbox" v-model="item.donation" /></td>
              <td>
                <select v-model="item.gender">
                  <option value="unmarked"> - </option>
                  <option value="male">Male</option>
                  <option value="female">Female</option>
                </select>
              </td>
              <td><input v-model="item.itemDescription" /></td>
              <td><input v-model="item.size" /></td>
              <td><input type="number" v-model.number="item.price" min="2" @input="validatePrice(item)" /></td>
              <td><button @click="removeItem(index)">Remove</button></td>
            </tr>
          </tbody>
        </table>

        <div style="margin-top:1rem;">
          <button @click="addItem">Add Item</button>
          <button @click="saveToLocalStorage">ðŸ’¾ Save</button>
          <button @click="exportAsJSON">â¬‡ Export JSON</button>
          <input type="file" @change="importFromJSON" />
        </div>
        <h3>Debug Data:</h3>
        <pre>{{ sellerData }}</pre>
      </div>

      <h2>Label Preview</h2>
      <button onclick="window.print()">Print</button>
    </div>
    <div class="label-sheet">
      <div class="label" v-for="(item, idx) in sellerData.items" :key="'label-'+idx">
        <div class="label-line label-header">
          <img src="./images/header-logo.png" />
        </div>
        <div class="label-line line">
          <span style="width: 33%; border-right: 2px dotted lightgrey;">
            <span :class="!item.donation ? 'crossed' : ''">D</span>
          </span>
          <span style="width: 65%;">
            <span :class="item.gender==='male'?'circled':''">B</span>
            <span> / </span>
            <span :class="item.gender==='female'?'circled':''">G</span>
          </span>
        </div>
        <div class="label-line item-desc">
          <div style="text-align: right; font-size: 24pt; font-style: italic;">Item</div>{{ item.itemDescription }}
        </div>
        <div class="label-line size">{{ item.size }}<span style="font-style: italic;">&nbsp;Size</span></div>
        <div class="label-line barcode">
          <div style="font-size: 8pt;">MyWebsite.com</div>
          <div>
            <canvas :ref="el=>drawBarcode(el,item)"></canvas>
          </div>
          <div class="price-seller">
            <span class="left">{{ sellerData.sellerId }}</span>
            <span class="right">${{ item.price.toFixed(2) }}</span>
          </div>
        </div>
      </div>
    </div>
  </div>
  <script type="text/javascript" src="./js/app.js"></script>
</body>

</html>